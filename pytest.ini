[tool:pytest]
markers =
    unit: marks tests as unit tests
    integration: marks tests as integration tests
    system: marks tests as system tests
    slow: marks tests as slow (deselect with '-m "not slow"')
    fast: marks tests as fast (run with '-m fast')
    spark: marks tests that require Spark
    delta: marks tests that require Delta Lake
    pyspark: marks tests that require real PySpark with Delta Lake (skipped in mock mode)
    performance: marks performance/stress tests
    benchmark: marks benchmark tests
    memory: marks memory usage tests
    security: marks security tests
    mypy: marks tests that require mypy type checking
    no_mypy: marks tests that are exempt from mypy validation
    type_check: marks tests that focus on type safety
    isolation: marks tests that need isolation (run separately)

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output options  
addopts =
    --strict-markers
    --disable-warnings
    --tb=short
    -q
    --durations=10

# Logging
log_cli = true
log_cli_level = WARN
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Environment variables
env =
    SPARK_MODE = mock
